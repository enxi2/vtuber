{"version":3,"sources":["Icon.tsx","AboutModal.tsx","ListSchedule.tsx","SearchHelpModal.tsx","useStoredRecord.ts","useStoredSet.ts","usePreferences.ts","useScheduleData.ts","App.tsx","usePoller.ts","useNotifications.tsx","index.tsx"],"names":["Icon","props","children","className","otherProps","GROUPS_TREE","label","value","recursiveFlatMap","node","fn","parent","results","push","child","AboutModal","show","handleClose","notificationPermission","showNotification","setSearch","useState","groupChecked","setGroupChecked","groupExpanded","setGroupExpanded","handleGroupCheck","useCallback","checked","checkedSet","Set","distinctChecked","has","filter","x","length","join","handleGroupExpand","expanded","Modal","onHide","Header","closeButton","Title","Body","Button","onClick","process","variant","id","nodes","checkModel","icons","check","uncheck","halfCheck","expandClose","expandOpen","expandAll","collapseAll","parentClose","parentOpen","leaf","onCheck","onExpand","showNodeIcon","href","target","rel","Footer","Status","getStatus","stream","now","endTime","valueOf","startTime","getTime","LIVE","ENDED","UPCOMING","countQuotes","s","count","i","charAt","parseFilterQuery","query","parts","split","quotedParts","quotes","replaceAll","splitQuery","map","part","cleanQuery","toLowerCase","startsWith","vtuberName","substring","matches","vtubers","vtuber","get","vtuberId","name","includes","romanizedName","groupNames","some","groupName","bookmarks","_","notifications","title","parseCondition","condition","ListSchedule","streams","setBookmarks","setNotifications","filterPref","setScrollToCurrentStream","container","useRef","firstView","setFirstView","filteredStreams","useMemo","conditions","valueSeq","every","toList","sortedStreams","sort","a","b","aStatus","bStatus","nextStream","find","scrollToCurrentStream","smooth","current","item","document","getElementById","streamId","scrollIntoView","behavior","undefined","useEffect","items","hasBookmark","hasNotification","moment","status","Row","Col","xs","md","remove","add","lg","link","src","thumbnail","alt","shortName","format","from","ref","SearchHelpModal","useStoredRecord","key","factory","localStorage","getItem","data","JSON","parse","Array","isArray","List","e","getRecordOrDefault","setValueInner","newValue","setItem","stringify","toJSON","removeItem","useStoredSet","console","error","getOrDefault","toArray","TIMEZONES","identifier","offset","DEFAULT_SITE_PREF","firstTime","timezone","Date","getTimezoneOffset","reduce","minTimezone","Math","abs","getDefaultTimezone","nameDisplay","DEFAULT_FILTER_PREF","search","savedSearches","RSitePref","Record","RFilterPref","RSortPref","sortBy","useScheduleData","Map","setVtubers","OrderedMap","setStreams","streamsByVtuber","setStreamsByVtuber","fetchData","last","fetch","cache","then","response","json","set","newStreams","source","membership","parseStream","groupBy","collection","toMap","catch","interval","setInterval","clearInterval","GET_CURRENT_TIME","tz","guess","App","aboutModalVisible","setAboutModalVisible","searchHelpModalVisible","setSearchHelpModalVisible","schedule","triggers","callback","intervalMs","defaultValue","result","setResult","newResult","usePoller","sitePref","setSitePref","clearSitePref","setFilterPref","clearFilterPref","sortPref","setSortPref","clearSortPref","reset","usePreferences","permission","setPermission","body","icon","window","Notification","toast","updateNotificationPermission","requestPermission","useNotifications","newSearch","clearData","confirm","handleSearch","event","saveSearch","cleanSearch","trim","contains","deleteSavedSearch","index","acc","isAfter","isBefore","Navbar","expand","Container","Brand","Text","Toggle","aria-controls","Collapse","Nav","Link","Form","Group","as","InputGroup","Prepend","Control","placeholder","onChange","Append","DropdownButton","menuAlign","Dropdown","Item","reverse","savedSearch","stopPropagation","preventDefault","toJS","autoClose","closeOnClick","draggablePercent","hideProgressBar","newestOnTop","pauseOnFocusLoss","position","transition","Slide","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.78fb674b.chunk.js","sourcesContent":["import { HTMLAttributes } from \"react\";\n\nexport default function Icon(\n  props: {\n    children: string;\n    className?: string;\n  } & HTMLAttributes<HTMLSpanElement>\n): JSX.Element {\n  const { children, className = \"\", ...otherProps } = props;\n  return (\n    <span className={`material-icons ${className}`} {...otherProps}>\n      {children}\n    </span>\n  );\n}\n","import { useCallback, useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport CheckboxTree from \"react-checkbox-tree\";\n\nimport Icon from \"./Icon\";\n\nimport \"./AboutModal.scss\";\n\ntype CheckboxTreeNode = {\n  label: string;\n  value: string;\n  children?: CheckboxTreeNode[];\n};\n\nconst GROUPS_TREE: CheckboxTreeNode = {\n  label: \"Select / Deselect All\",\n  value: \"all\",\n  children: [\n    {\n      label: \"Hololive\",\n      value: \"hololive\",\n      children: [\n        {\n          label: \"Hololive EN\",\n          value: \"hololive en\",\n        },\n        {\n          label: \"Hololive IND\",\n          value: \"hololive ind\",\n        },\n        {\n          label: \"Hololive JP\",\n          value: \"hololive jp\",\n        },\n        {\n          label: \"Holostars\",\n          value: \"holostars\",\n        },\n      ],\n    },\n    { label: \"Nijisanji\", value: \"nijisanji\" },\n    { label: \"VOMS\", value: \"voms\" },\n    { label: \"Independent\", value: \"independent\" },\n  ],\n};\n\nfunction recursiveFlatMap<T>(\n  node: CheckboxTreeNode,\n  fn: (node: CheckboxTreeNode, parent: CheckboxTreeNode | null) => T,\n  parent?: CheckboxTreeNode | null\n): T[] {\n  const results = [];\n  results.push(fn(node, parent ?? null));\n  if (node.children != null) {\n    for (const child of node.children) {\n      results.push(...recursiveFlatMap(child, fn, node));\n    }\n  }\n  return results;\n}\n\nexport default function AboutModal(props: {\n  show: boolean;\n  handleClose: () => void;\n  notificationPermission: NotificationPermission;\n  showNotification: (\n    title: string,\n    body: string,\n    link: string,\n    icon: string\n  ) => void;\n  setSearch: (search: string) => void;\n}) {\n  const {\n    show,\n    handleClose,\n    notificationPermission,\n    showNotification,\n    setSearch,\n  } = props;\n\n  const [groupChecked, setGroupChecked] = useState<string[]>([]);\n  const [groupExpanded, setGroupExpanded] = useState<string[]>([\"all\"]);\n\n  const handleGroupCheck = useCallback(\n    (checked: string[]): void => {\n      setGroupChecked(checked);\n\n      const checkedSet = new Set(checked);\n      const distinctChecked = recursiveFlatMap(\n        GROUPS_TREE,\n        (\n          node: CheckboxTreeNode,\n          parent: CheckboxTreeNode | null\n        ): string | null => {\n          if (\n            checkedSet.has(node.value) &&\n            (parent == null || !checkedSet.has(parent.value))\n          ) {\n            return node.value;\n          } else {\n            return null;\n          }\n        }\n      ).filter((x: string | null): x is string => x != null);\n\n      if (distinctChecked.length === 0 || distinctChecked[0] === \"all\") {\n        setSearch(\"\");\n      } else {\n        setSearch(`g:\"${distinctChecked.join(\",\")}\"`);\n      }\n    },\n    [setSearch]\n  );\n\n  const handleGroupExpand = useCallback((expanded: string[]): void => {\n    setGroupExpanded(expanded);\n  }, []);\n\n  return (\n    <Modal className=\"about-modal\" show={show} onHide={handleClose}>\n      <Modal.Header closeButton>\n        <Modal.Title>VTuber Streams</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <p>\n          A page to check, search, and get notifications about VTuber streams.\n        </p>\n        <ul>\n          <li>\n            <Icon>star_outline</Icon> to bookmark a VTuber\n          </li>\n          <li>\n            <Icon>notifications_none</Icon> to receive notifications for a\n            VTuber (native notifications are{\" \"}\n            <b>\n              {notificationPermission === \"granted\" ? \"allowed\" : \"blocked\"}\n            </b>\n            ,{\" \"}\n            <Button\n              className=\"align-baseline\"\n              onClick={() =>\n                showNotification(\n                  \"Test notification\",\n                  \"This is a test notification\",\n                  \"#\",\n                  `${process.env.PUBLIC_URL}/placeholder.png`\n                )\n              }\n              variant=\"outline-primary\"\n            >\n              test notification\n            </Button>\n            )\n          </li>\n          <li>\n            <b>Clear Data</b> will clear all data on this website\n          </li>\n        </ul>\n        <p>First time? Choose some groups to get started:</p>\n        <CheckboxTree\n          id=\"groups-checkbox-tree\"\n          nodes={[GROUPS_TREE]}\n          checked={groupChecked}\n          checkModel=\"all\"\n          expanded={groupExpanded}\n          icons={{\n            check: <Icon>check_box</Icon>,\n            uncheck: <Icon>check_box_outline_blank</Icon>,\n            halfCheck: <Icon>indeterminate_check_box</Icon>,\n            expandClose: <Icon>expand_less</Icon>,\n            expandOpen: <Icon>expand_more</Icon>,\n            expandAll: null,\n            collapseAll: null,\n            parentClose: null,\n            parentOpen: null,\n            leaf: null,\n          }}\n          onCheck={handleGroupCheck}\n          onExpand={handleGroupExpand}\n          showNodeIcon={false}\n        />\n        <p>\n          Questions or feedback =&gt;{\" \"}\n          <a\n            href=\"https://discordapp.com/users/659617582298562570\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            enxi#0410\n          </a>\n        </p>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"primary\" onClick={handleClose}>\n          Close\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n","import { List, Record, Map, Set } from \"immutable\";\nimport moment from \"moment-timezone\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\n\nimport Icon from \"./Icon\";\nimport { Stream, VTuber } from \"./types\";\nimport { FilterPref, SitePref } from \"./usePreferences\";\n\nimport \"./ListSchedule.scss\";\n\nenum Status {\n  ENDED,\n  LIVE,\n  UPCOMING,\n}\n\ntype Condition = {\n  matches(\n    stream: Stream,\n    vtubers: Map<string, VTuber>,\n    bookmarks: Set<string>,\n    notifications: Set<string>\n  ): boolean;\n};\n\nfunction getStatus(stream: Stream, now: moment.Moment): Status {\n  if (stream.endTime == null && now.valueOf() > stream.startTime.getTime()) {\n    return Status.LIVE;\n  }\n  if (now.valueOf() >= stream.startTime.getTime()) {\n    return Status.ENDED;\n  }\n  return Status.UPCOMING;\n}\n\nfunction countQuotes(s: string): number {\n  let count = 0;\n  for (let i = 0; i < s.length; i++) {\n    if (s.charAt(i) === '\"') {\n      count++;\n    }\n  }\n  return count;\n}\n\nfunction splitQuery(query: string): string[] {\n  const parts: string[] = query.split(\" \");\n  const quotedParts: string[] = [];\n  let quotes = 0;\n  for (let i = 0; i < parts.length; i++) {\n    if (quotes % 2 === 1) {\n      quotedParts[quotedParts.length - 1] += \" \" + parts[i].replaceAll('\"', \"\");\n    } else {\n      quotedParts.push(parts[i].replaceAll('\"', \"\"));\n    }\n    quotes += countQuotes(parts[i]);\n  }\n  return quotedParts;\n}\n\nfunction parseCondition(query: string): Condition {\n  const cleanQuery = query.toLowerCase();\n\n  if (cleanQuery.startsWith(\"v:\")) {\n    const vtuberName = cleanQuery.substring(2);\n    return {\n      matches: (stream: Stream, vtubers: Map<string, VTuber>): boolean => {\n        const vtuber = vtubers.get(stream.vtuberId);\n        return (\n          vtuber != null &&\n          (vtuber.name.toLowerCase().includes(vtuberName) ||\n            vtuber.romanizedName.toLowerCase().includes(vtuberName))\n        );\n      },\n    };\n  } else if (cleanQuery.startsWith(\"g:\")) {\n    const groupNames = cleanQuery.substring(2).split(\",\");\n    return {\n      matches: (stream: Stream, vtubers: Map<string, VTuber>): boolean => {\n        const vtuber = vtubers.get(stream.vtuberId);\n        return (\n          vtuber != null &&\n          groupNames.some((groupName) =>\n            vtuber.groupName.toLowerCase().includes(groupName)\n          )\n        );\n      },\n    };\n  } else if (cleanQuery === \"bookmark\" || cleanQuery === \"bookmarks\") {\n    return {\n      matches: (\n        stream: Stream,\n        vtubers: Map<string, VTuber>,\n        bookmarks: Set<string>\n      ): boolean => {\n        const vtuber = vtubers.get(stream.vtuberId);\n        return vtuber != null && bookmarks.has(vtuber.vtuberId);\n      },\n    };\n  } else if (cleanQuery === \"notification\" || cleanQuery === \"notifications\") {\n    return {\n      matches: (\n        stream: Stream,\n        vtubers: Map<string, VTuber>,\n        _: Set<string>,\n        notifications: Set<string>\n      ): boolean => {\n        const vtuber = vtubers.get(stream.vtuberId);\n        return vtuber != null && notifications.has(vtuber.vtuberId);\n      },\n    };\n  } else {\n    return {\n      matches: (stream: Stream, vtubers: Map<string, VTuber>): boolean => {\n        const vtuber = vtubers.get(stream.vtuberId);\n        return (\n          stream.title.toLowerCase().includes(cleanQuery) ||\n          stream.vtuberId.toLowerCase().includes(cleanQuery) ||\n          (vtuber != null &&\n            (vtuber.name.toLowerCase().includes(cleanQuery) ||\n              vtuber.romanizedName.toLowerCase().includes(cleanQuery)))\n        );\n      },\n    };\n  }\n}\n\nfunction parseFilterQuery(query: string): Condition[] {\n  const parts = splitQuery(query);\n  return parts\n    .map((part: string): Condition | null => parseCondition(part))\n    .filter(\n      (condition: Condition | null): condition is Condition => condition != null\n    );\n}\n\nexport default function ListSchedule(props: {\n  now: moment.Moment;\n  streams: Map<string, Stream>;\n  vtubers: Map<string, VTuber>;\n  sitePref: Record<SitePref>;\n  filterPref: Record<FilterPref>;\n  bookmarks: Set<string>;\n  setBookmarks: (bookmarks: Set<string>) => void;\n  notifications: Set<string>;\n  setNotifications: (notifications: Set<string>) => void;\n  setScrollToCurrentStream: (whyReact: () => () => boolean) => void;\n}) {\n  const {\n    now,\n    streams,\n    vtubers,\n    bookmarks,\n    setBookmarks,\n    notifications,\n    setNotifications,\n    filterPref,\n    setScrollToCurrentStream,\n  } = props;\n\n  const container = useRef<HTMLDivElement>(null);\n  const [firstView, setFirstView] = useState<boolean>(true);\n\n  const filteredStreams = useMemo((): List<Stream> => {\n    const query = filterPref.get(\"search\");\n    const conditions = parseFilterQuery(query);\n    return streams\n      .valueSeq()\n      .filter((stream: Stream): boolean =>\n        conditions.every((condition: Condition): boolean =>\n          condition.matches(stream, vtubers, bookmarks, notifications)\n        )\n      )\n      .toList();\n  }, [bookmarks, filterPref, notifications, streams, vtubers]);\n\n  const sortedStreams = useMemo(\n    (): List<Stream> =>\n      filteredStreams\n        .valueSeq()\n        .sort((a: Stream, b: Stream): number => {\n          const aStatus = getStatus(a, now);\n          const bStatus = getStatus(b, now);\n          if (aStatus !== bStatus) {\n            return aStatus < bStatus ? -1 : 1;\n          }\n          if (aStatus === Status.ENDED) {\n            return (\n              (a.endTime ?? a.startTime).getTime() -\n              (b.endTime ?? b.startTime).getTime()\n            );\n          } else {\n            return a.startTime.getTime() - b.startTime.getTime();\n          }\n        })\n        .toList(),\n    [filteredStreams, now]\n  );\n\n  const nextStream = useMemo(\n    (): Stream | null =>\n      sortedStreams.find(\n        (stream: Stream): boolean =>\n          (stream.endTime == null &&\n            now.valueOf() > stream.startTime.getTime()) ||\n          now.valueOf() < stream.startTime.getTime()\n      ) ?? null,\n    [now, sortedStreams]\n  );\n\n  const scrollToCurrentStream = useCallback(\n    (smooth: boolean = false): boolean => {\n      if (container.current != null && nextStream != null) {\n        const item = document.getElementById(nextStream.streamId);\n        if (item != null) {\n          item.scrollIntoView(smooth ? { behavior: \"smooth\" } : undefined);\n          return true;\n        }\n      }\n      return false;\n    },\n    [nextStream]\n  );\n\n  useEffect((): void => {\n    setScrollToCurrentStream((): (() => boolean) => scrollToCurrentStream);\n  }, [scrollToCurrentStream, setScrollToCurrentStream]);\n\n  const items = useMemo(\n    () =>\n      sortedStreams.map((stream: Stream): JSX.Element | null => {\n        const vtuberId = stream.vtuberId;\n        const vtuber: VTuber | undefined = vtubers.get(vtuberId);\n        if (vtuber == null) {\n          return null;\n        }\n\n        const hasBookmark = bookmarks.has(vtuberId);\n        const hasNotification = notifications.has(vtuberId);\n        const startTime = moment(stream.startTime);\n        const endTime = stream.endTime != null ? moment(stream.endTime) : null;\n        const status = getStatus(stream, now);\n\n        return (\n          <Row\n            key={stream.streamId}\n            id={stream.streamId}\n            className={`stream-item d-flex flex-row m-0 py-2 ${Status[\n              status\n            ].toLowerCase()} ${\n              nextStream?.streamId === stream.streamId ? \"next-stream\" : \"\"\n            }`}\n          >\n            <Col xs={2} md={1} className=\"stream-toggles text-center\">\n              <div\n                className={`toggle-bookmark ${hasBookmark ? \"active\" : \"\"}`}\n                onClick={() =>\n                  hasBookmark\n                    ? setBookmarks(bookmarks.remove(vtuberId))\n                    : setBookmarks(bookmarks.add(vtuberId))\n                }\n              >\n                <Icon>{hasBookmark ? \"star\" : \"star_outline\"}</Icon>\n              </div>\n              <br />\n              <div\n                className={`toggle-notification ${\n                  hasNotification ? \"active\" : \"\"\n                }`}\n                onClick={() =>\n                  hasNotification\n                    ? setNotifications(notifications.remove(vtuberId))\n                    : setNotifications(notifications.add(vtuberId))\n                }\n              >\n                <Icon>\n                  {hasNotification\n                    ? \"notifications_active\"\n                    : \"notifications_none\"}\n                </Icon>\n              </div>\n            </Col>\n\n            <Col xs={4} md={2} lg={1} className=\"stream-vtuber p-0\">\n              <a href={vtuber.link}>\n                <img src={vtuber.thumbnail} alt={vtuber.name} />\n                <br />\n                {vtuber.shortName}\n              </a>\n            </Col>\n\n            <Col xs={6} md={3} lg={2} className=\"stream-info p-0 text-center\">\n              <a href={stream.link} target=\"_blank\" rel=\"noreferrer\">\n                <img\n                  src={\n                    stream.thumbnail ??\n                    `${process.env.PUBLIC_URL}/placeholder.png`\n                  }\n                  alt={\"Video thumbnail\"}\n                />\n              </a>\n            </Col>\n\n            <Col\n              xs={12}\n              md={6}\n              className=\"stream-title px-4 px-md-0 py-2 text-center text-md-left\"\n            >\n              <a href={stream.link} target=\"_blank\" rel=\"noreferrer\">\n                {stream.title}\n              </a>\n            </Col>\n\n            <Col xs={12} lg={2} className=\"stream-time p-0 text-center\">\n              {startTime.format(\"h:mm A\")} <br className=\"d-none d-lg-inline\" />\n              <i>\n                {endTime != null\n                  ? `ended ${endTime.from(now)}`\n                  : status === Status.LIVE\n                  ? `started ${startTime.from(now)}`\n                  : `starting ${startTime.from(now)}`}\n              </i>\n            </Col>\n          </Row>\n        );\n      }),\n    [\n      bookmarks,\n      setBookmarks,\n      notifications,\n      setNotifications,\n      nextStream,\n      now,\n      sortedStreams,\n      vtubers,\n    ]\n  );\n\n  useEffect((): void => {\n    if (firstView && sortedStreams.count() > 0) {\n      if (scrollToCurrentStream()) {\n        setFirstView(false);\n      }\n    }\n  }, [firstView, scrollToCurrentStream, sortedStreams]);\n\n  return (\n    <div className=\"list-schedule\" ref={container}>\n      {items}\n    </div>\n  );\n}\n","import Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\n\nimport Icon from \"./Icon\";\n\nexport default function SearchHelpModal(props: {\n  show: boolean;\n  handleClose: () => void;\n}) {\n  const { show, handleClose } = props;\n\n  return (\n    <Modal className=\"search-help-modal\" show={show} onHide={handleClose}>\n      <Modal.Header closeButton>\n        <Modal.Title>Search Help</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <p>\n          Use the search to filter for VTubers and streams. The following\n          case-insensitive search terms are supported:\n        </p>\n        <ul>\n          <li>\n            General search terms such as <code>pikamee</code> or{\" \"}\n            <code>supachat</code> filter both VTuber and video titles.\n          </li>\n          <li>\n            Terms with spaces require surrounding quotes, such as{\" \"}\n            <code>\"super chat\"</code>.\n          </li>\n          <li>\n            Specific VTubers can be searched using the <code>v:</code> prefix,\n            such as <code>v:pikamee</code>.\n          </li>\n          <li>\n            Specific groups can be searched using the <code>g:</code> prefix.\n            The supported groups are:\n            <ul>\n              <li>\n                <code>g:hololive</code>\n              </li>\n              <li>\n                <code>g:voms</code>\n              </li>\n            </ul>\n          </li>\n          <li>\n            Save searches using the <Icon>playlist_add</Icon> button.\n          </li>\n        </ul>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"primary\" onClick={handleClose}>\n          Close\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n","import { List, Record } from \"immutable\";\nimport { useCallback, useState } from \"react\";\n\nfunction getRecordOrDefault<T>(\n  key: string,\n  factory: (values?: any) => Record<T>\n): Record<T> {\n  const item = localStorage.getItem(key);\n  if (item != null) {\n    try {\n      const data = JSON.parse(item);\n      for (const key in data) {\n        if (Array.isArray(data[key])) {\n          data[key] = List(data[key]);\n        }\n      }\n      return factory(data);\n    } catch (e) {\n      return factory();\n    }\n  }\n  return factory();\n}\n\nexport default function useStoredRecord<T>(\n  key: string,\n  factory: (values?: any) => Record<T>\n): [Record<T>, (value: Record<T>) => void, () => void] {\n  const [value, setValueInner] = useState<Record<T>>(\n    getRecordOrDefault<T>(key, factory)\n  );\n\n  const setValue = useCallback(\n    (newValue: Record<T>): void => {\n      localStorage.setItem(key, JSON.stringify(newValue.toJSON()));\n      setValueInner(newValue);\n    },\n    [key]\n  );\n\n  const clearValue = useCallback(() => {\n    localStorage.removeItem(key);\n    setValueInner(factory());\n  }, [factory, key]);\n\n  return [value, setValue, clearValue];\n}\n","import { Set } from \"immutable\";\nimport { useCallback, useState } from \"react\";\n\nfunction getOrDefault(key: string): Set<string> {\n  const item = localStorage.getItem(key);\n  if (item != null) {\n    try {\n      return Set(JSON.parse(item) as unknown as string[]);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  return Set();\n}\n\nexport default function useStoredSet(\n  key: string\n): [Set<string>, (value: Set<string>) => void] {\n  const [value, setValueInner] = useState<Set<string>>(getOrDefault(key));\n\n  const setValue = useCallback(\n    (newValue: Set<string>) => {\n      localStorage.setItem(key, JSON.stringify(newValue.toArray()));\n      setValueInner(newValue);\n    },\n    [key]\n  );\n\n  return [value, setValue];\n}\n","import { List, Record, Set } from \"immutable\";\nimport { useCallback } from \"react\";\n\nimport { NameDisplay, SortBy, Timezone } from \"./types\";\nimport useStoredRecord from \"./useStoredRecord\";\nimport useStoredSet from \"./useStoredSet\";\n\nexport const TIMEZONES: Timezone[] = [\n  { name: \"UTC\", identifier: \"UTC\", offset: 0 },\n  { name: \"PDT\", identifier: \"America/Los_Angeles\", offset: 480 },\n];\n\nexport const NAME_DISPLAYS: NameDisplay[] = [\"original\", \"romaji\", \"short\"];\n\nexport const SORT_BYS: SortBy[] = [\"next stream\", \"popularity\", \"random\"];\n\nfunction getDefaultTimezone(): Timezone {\n  const offset = new Date().getTimezoneOffset();\n  const timezone = TIMEZONES.reduce((minTimezone, timezone) =>\n    Math.abs(offset - timezone.offset) < Math.abs(offset - minTimezone.offset)\n      ? timezone\n      : minTimezone\n  );\n  if (timezone != null) {\n    return timezone;\n  }\n\n  // Return UTC\n  return TIMEZONES[0];\n}\n\nexport type SitePref = {\n  firstTime: boolean;\n  timezone: Timezone;\n  nameDisplay: NameDisplay;\n};\n\nconst DEFAULT_SITE_PREF: SitePref = {\n  firstTime: true,\n  timezone: getDefaultTimezone(),\n  nameDisplay: \"original\",\n};\n\nexport type FilterPref = {\n  search: string;\n  savedSearches: List<string>;\n};\n\nconst DEFAULT_FILTER_PREF: FilterPref = {\n  search: \"\",\n  savedSearches: List(),\n};\n\nexport type SortPref = {\n  sortBy: SortBy;\n};\n\nconst DEFAULT_SORT_PREF: SortPref = {\n  sortBy: \"next stream\",\n};\n\nexport const RSitePref = Record<SitePref>(DEFAULT_SITE_PREF);\nexport const RFilterPref = Record<FilterPref>(DEFAULT_FILTER_PREF);\nexport const RSortPref = Record<SortPref>(DEFAULT_SORT_PREF);\n\nexport default function usePreferences() {\n  const [sitePref, setSitePref, clearSitePref] = useStoredRecord<SitePref>(\n    \"site\",\n    RSitePref\n  );\n  const [filterPref, setFilterPref, clearFilterPref] =\n    useStoredRecord<FilterPref>(\"filter\", RFilterPref);\n  const [sortPref, setSortPref, clearSortPref] = useStoredRecord<SortPref>(\n    \"sort\",\n    RSortPref\n  );\n  const [bookmarks, setBookmarks] = useStoredSet(\"bookmarks\");\n  const [notifications, setNotifications] = useStoredSet(\"notifications\");\n\n  const reset = useCallback(() => {\n    clearSitePref();\n    clearFilterPref();\n    clearSortPref();\n    setBookmarks(Set());\n    setNotifications(Set());\n  }, [\n    clearSitePref,\n    clearFilterPref,\n    clearSortPref,\n    setBookmarks,\n    setNotifications,\n  ]);\n\n  return {\n    sitePref,\n    setSitePref,\n    filterPref,\n    setFilterPref,\n    sortPref,\n    setSortPref,\n    reset,\n    bookmarks,\n    setBookmarks,\n    notifications,\n    setNotifications,\n  };\n}\n","import { List, Map, OrderedMap } from \"immutable\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nimport {\n  ScheduleData,\n  SerializedStream,\n  Stream,\n  StreamId,\n  StreamSource,\n  VTuberId,\n  VTuber,\n} from \"./types\";\n\nconst ONE_MINUTE_MS = 60 * 1000;\n\nfunction parseStream(stream: SerializedStream): Stream {\n  return {\n    streamId: stream.streamId,\n    vtuberId: stream.vtuberId,\n    source: stream.source as StreamSource | null,\n    title: stream.title,\n    link: stream.link,\n    thumbnail: stream.thumbnail,\n    startTime: new Date(stream.startTime),\n    endTime: stream.endTime != null ? new Date(stream.endTime) : null,\n    membership: stream.membership === 1,\n  };\n}\n\nexport default function useScheduleData() {\n  const [vtubers, setVtubers] = useState<Map<VTuberId, VTuber>>(Map());\n  const [streams, setStreams] = useState<Map<StreamId, Stream>>(OrderedMap());\n  const [streamsByVtuber, setStreamsByVtuber] = useState<\n    Map<VTuberId, List<Stream>>\n  >(Map());\n\n  const fetchData = useCallback((last?: number): void => {\n    fetch(`https://vtuber-streams-data.herokuapp.com/latest.json`, {\n      cache: \"no-cache\",\n    })\n      .then((response) => response.json())\n      .then((data: ScheduleData) => {\n        setVtubers(\n          data.vtubers.reduce(\n            (vtubers, vtuber) =>\n              vtubers.has(vtuber.vtuberId)\n                ? vtubers\n                : vtubers.set(vtuber.vtuberId, vtuber),\n            Map<VTuberId, VTuber>()\n          )\n        );\n        const newStreams = data.streams.reduce(\n          (streams, stream) =>\n            streams.has(stream.streamId)\n              ? streams\n              : streams.set(stream.streamId, parseStream(stream)),\n          OrderedMap<StreamId, Stream>()\n        );\n        setStreams(newStreams);\n        setStreamsByVtuber(\n          newStreams\n            .valueSeq()\n            .groupBy((stream) => stream.vtuberId)\n            .map((collection) => collection.toList())\n            .toMap()\n        );\n      })\n      .catch((e) => console.error(e));\n  }, []);\n\n  useEffect((): (() => void) => {\n    fetchData();\n\n    let last = Date.now();\n    const interval = setInterval((): void => {\n      fetchData(last);\n      last = Date.now();\n    }, ONE_MINUTE_MS);\n\n    return () => clearInterval(interval);\n  }, [fetchData]);\n\n  return { vtubers, streams, streamsByVtuber };\n}\n","import { List, Map } from \"immutable\";\nimport moment from \"moment-timezone\";\nimport {\n  ChangeEvent,\n  MouseEvent,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport Col from \"react-bootstrap/Col\";\nimport Dropdown from \"react-bootstrap/Dropdown\";\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\nimport Form from \"react-bootstrap/Form\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Row from \"react-bootstrap/Row\";\nimport { Slide, ToastContainer } from \"react-toastify\";\n\nimport AboutModal from \"./AboutModal\";\nimport Icon from \"./Icon\";\nimport ListSchedule from \"./ListSchedule\";\nimport SearchHelpModal from \"./SearchHelpModal\";\nimport { Stream } from \"./types\";\nimport useNotifications from \"./useNotifications\";\nimport usePoller from \"./usePoller\";\nimport usePreferences from \"./usePreferences\";\nimport useScheduleData from \"./useScheduleData\";\n\nimport \"./App.scss\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\ntype TriggerState = \"after\" | \"before\" | \"unknown\";\n\nconst TEN_SECONDS_MS = 10 * 1000;\nconst ONE_HOUR_MS = 60 * 60 * 1000;\n\nconst GET_CURRENT_TIME = () => moment.tz(undefined, moment.tz.guess());\n\nfunction App() {\n  const [aboutModalVisible, setAboutModalVisible] = useState<boolean>(false);\n  const [searchHelpModalVisible, setSearchHelpModalVisible] =\n    useState<boolean>(false);\n  const schedule = useRef<HTMLDivElement>(null);\n  const [scrollToCurrentStream, setScrollToCurrentStream] = useState<\n    ((smooth?: boolean) => boolean) | null\n  >(null);\n  const triggers = useRef<Map<string, TriggerState>>(Map());\n\n  const now = usePoller<moment.Moment>(\n    GET_CURRENT_TIME,\n    TEN_SECONDS_MS,\n    GET_CURRENT_TIME()\n  );\n\n  const {\n    sitePref,\n    setSitePref,\n    filterPref,\n    setFilterPref,\n    reset,\n    bookmarks,\n    setBookmarks,\n    notifications,\n    setNotifications,\n  } = usePreferences();\n\n  const { notificationPermission, showNotification } = useNotifications();\n\n  const { vtubers, streams } = useScheduleData();\n\n  const search = useMemo((): string => filterPref.get(\"search\"), [filterPref]);\n\n  const setSearch = useCallback(\n    (newSearch: string): void =>\n      setFilterPref(filterPref.set(\"search\", newSearch)),\n    [filterPref, setFilterPref]\n  );\n\n  const clearData = useCallback((): void => {\n    if (\n      window.confirm(\n        \"Press OK to clear all bookmarks, filters, etc. from this web page.\"\n      )\n    ) {\n      reset();\n    }\n  }, [reset]);\n\n  const handleSearch = useCallback(\n    (event: ChangeEvent<HTMLInputElement>): void =>\n      setSearch(event.target.value),\n    [setSearch]\n  );\n\n  const savedSearches = useMemo((): List<string> => {\n    return filterPref.get(\"savedSearches\");\n  }, [filterPref]);\n\n  const saveSearch = useCallback((): void => {\n    const cleanSearch = search.trim();\n    if (cleanSearch.length > 0 && !savedSearches.contains(cleanSearch)) {\n      setFilterPref(\n        filterPref.set(\"savedSearches\", savedSearches.push(cleanSearch))\n      );\n    }\n  }, [savedSearches, search, filterPref, setFilterPref]);\n\n  const deleteSavedSearch = useCallback(\n    (index: number): void => {\n      setFilterPref(\n        filterPref.set(\"savedSearches\", savedSearches.remove(index))\n      );\n    },\n    [savedSearches, filterPref, setFilterPref]\n  );\n\n  useEffect((): void => {\n    triggers.current = streams.reduce(\n      (\n        acc: Map<string, TriggerState>,\n        stream: Stream\n      ): Map<string, TriggerState> => {\n        if (acc.has(stream.streamId)) {\n          if (\n            acc.get(stream.streamId) === \"before\" &&\n            now.isAfter(stream.startTime)\n          ) {\n            const vtuber = vtubers.get(stream.vtuberId)!;\n            if (notifications.has(vtuber.vtuberId)) {\n              showNotification(\n                `${vtuber.shortName}'s stream is starting!`,\n                stream.title,\n                stream.link,\n                stream.thumbnail ?? vtuber.thumbnail\n              );\n            }\n            return acc.set(stream.streamId, \"after\");\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.set(\n            stream.streamId,\n            now.isBefore(stream.startTime) ? \"before\" : \"after\"\n          );\n        }\n      },\n      triggers.current\n    );\n  }, [notifications, now, showNotification, streams, vtubers]);\n\n  useEffect((): void => {\n    if (sitePref.get(\"firstTime\")) {\n      setAboutModalVisible(true);\n      setSitePref(sitePref.set(\"firstTime\", false));\n    }\n  }, [sitePref, setSitePref]);\n\n  return (\n    <div className=\"app d-flex flex-column h-100\">\n      <Navbar expand=\"md\">\n        <Container className=\"px-0 px-md-1\">\n          <Navbar.Brand>VTuber Streams</Navbar.Brand>\n          <Navbar.Text className=\"d-none d-sm-inline-block\">\n            {now.format(\"h:mm A z\")}\n          </Navbar.Text>\n          <Navbar.Toggle aria-controls=\"navbar\" />\n          <Navbar.Collapse id=\"navbar\">\n            <Nav className=\"ml-auto\">\n              <Nav.Link\n                className=\"d-sm-none\"\n                href=\"#\"\n                onClick={() => setSearchHelpModalVisible(true)}\n              >\n                Search Help\n              </Nav.Link>\n              <Nav.Link href=\"#\" onClick={clearData}>\n                Clear Data\n              </Nav.Link>\n              <Nav.Link href=\"#\" onClick={() => setAboutModalVisible(true)}>\n                About\n              </Nav.Link>\n              {/*\n              <NavDropdown id=\"timezone\" title={sitePref.get(\"timezone\").name}>\n                {TIMEZONES.map((timezone) => (\n                  <NavDropdown.Item\n                    key={timezone.name}\n                    onClick={() =>\n                      setSitePref(sitePref.set(\"timezone\", timezone))\n                    }\n                  >\n                    {timezone.name}\n                  </NavDropdown.Item>\n                ))}\n              </NavDropdown>\n              <NavDropdown\n                id=\"name_display\"\n                title={sitePref.get(\"nameDisplay\")}\n              >\n                {NAME_DISPLAYS.map((nameDisplay) => (\n                  <NavDropdown.Item\n                    key={nameDisplay}\n                    className=\"text-capitalize\"\n                    onClick={() =>\n                      setSitePref(sitePref.set(\"nameDisplay\", nameDisplay))\n                    }\n                  >\n                    {nameDisplay}\n                  </NavDropdown.Item>\n                ))}\n              </NavDropdown>\n              */}\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n      <Container className=\"filters px-3 px-sm-0\">\n        <Row>\n          <Form.Group as={Col} className=\"m-0\">\n            <InputGroup className=\"mb-2 mr-sm-2\">\n              <InputGroup.Prepend>\n                <InputGroup.Text\n                  className=\"scroll icon-button\"\n                  onClick={() => {\n                    if (scrollToCurrentStream != null) {\n                      scrollToCurrentStream(/* smooth= */ true);\n                    }\n                  }}\n                >\n                  <span className=\"material-icons\">update</span>\n                </InputGroup.Text>\n              </InputGroup.Prepend>\n              <InputGroup.Prepend className=\"d-none d-sm-flex\">\n                <InputGroup.Text\n                  className=\"search icon-button\"\n                  onClick={() => setSearchHelpModalVisible(true)}\n                >\n                  <span className=\"material-icons\">search</span>\n                </InputGroup.Text>\n              </InputGroup.Prepend>\n              <Form.Control\n                id=\"search\"\n                placeholder=\"v:pikamee title bookmarks\"\n                onChange={handleSearch}\n                value={search}\n              />\n              <InputGroup.Append>\n                <DropdownButton\n                  title=\"\"\n                  menuAlign=\"right\"\n                  variant=\"outline-secondary\"\n                >\n                  <Dropdown.Item\n                    key={\"clear\"}\n                    onClick={(): void => setSearch(\"\")}\n                  >\n                    Clear search\n                  </Dropdown.Item>\n                  {savedSearches.count() > 0 ? (\n                    savedSearches\n                      .reverse()\n                      .map(\n                        (savedSearch: string, index: number): JSX.Element => (\n                          <Dropdown.Item\n                            key={index}\n                            className=\"d-flex\"\n                            onClick={(): void => setSearch(savedSearch)}\n                          >\n                            {savedSearch}\n                            <div\n                              className=\"clear-search ml-auto pl-2\"\n                              key=\"clear\"\n                            >\n                              <Icon\n                                onClick={(event: MouseEvent): boolean => {\n                                  deleteSavedSearch(index);\n                                  event.stopPropagation();\n                                  event.preventDefault();\n                                  return false;\n                                }}\n                              >\n                                clear\n                              </Icon>\n                            </div>\n                          </Dropdown.Item>\n                        )\n                      )\n                      .toJS()\n                  ) : (\n                    <Dropdown.Header>No saved searches</Dropdown.Header>\n                  )}\n                </DropdownButton>\n              </InputGroup.Append>\n              <InputGroup.Append>\n                <InputGroup.Text\n                  className=\"save icon-button\"\n                  onClick={saveSearch}\n                >\n                  <span className=\"material-icons\">playlist_add</span>\n                </InputGroup.Text>\n              </InputGroup.Append>\n            </InputGroup>\n          </Form.Group>\n          {/*\n            <Form.Group as={Col} className=\"m-0\">\n              <Dropdown>\n                <Dropdown.Toggle id=\"sort\" className=\"text-capitalize\">\n                  Sort by: {sortPref.get(\"sortBy\")}\n                </Dropdown.Toggle>\n                <Dropdown.Menu>\n                  {SORT_BYS.map((sortBy) => (\n                    <Dropdown.Item\n                      key={sortBy}\n                      className=\"text-capitalize\"\n                      onClick={() =>\n                        setSortPref(sortPref.set(\"sortBy\", sortBy))\n                      }\n                    >\n                      {sortBy}\n                    </Dropdown.Item>\n                  ))}\n                </Dropdown.Menu>\n              </Dropdown>\n            </Form.Group>\n            */}\n        </Row>\n      </Container>\n      <Container className=\"schedule px-0 mt-2\" ref={schedule}>\n        <ListSchedule\n          now={now}\n          streams={streams}\n          vtubers={vtubers}\n          sitePref={sitePref}\n          filterPref={filterPref}\n          bookmarks={bookmarks}\n          setBookmarks={setBookmarks}\n          notifications={notifications}\n          setNotifications={setNotifications}\n          setScrollToCurrentStream={setScrollToCurrentStream}\n        />\n      </Container>\n      <AboutModal\n        show={aboutModalVisible}\n        handleClose={() => setAboutModalVisible(false)}\n        notificationPermission={notificationPermission}\n        showNotification={showNotification}\n        setSearch={setSearch}\n      />\n      <SearchHelpModal\n        show={searchHelpModalVisible}\n        handleClose={() => setSearchHelpModalVisible(false)}\n      />\n      <ToastContainer\n        autoClose={ONE_HOUR_MS}\n        closeOnClick={true}\n        draggablePercent={50}\n        hideProgressBar={true}\n        newestOnTop={true}\n        pauseOnFocusLoss={false}\n        position=\"top-center\"\n        transition={Slide}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import { useEffect, useState } from \"react\";\n\nexport default function usePoller<T>(\n  callback: () => T,\n  intervalMs: number,\n  defaultValue: T\n): T {\n  const [result, setResult] = useState<T>(defaultValue);\n\n  useEffect(() => {\n    const checkCallback = () => {\n      const newResult = callback();\n      if (result !== newResult) {\n        setResult(newResult);\n      }\n    };\n    const interval = setInterval(checkCallback, intervalMs);\n\n    return () => clearInterval(interval);\n  }, [callback, intervalMs, result]);\n\n  return result;\n}\n","import { useCallback, useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\n\nimport \"react-toastify/dist/ReactToastify.min.css\";\n\nexport default function useNotifications(): {\n  notificationPermission: NotificationPermission;\n  showNotification: (\n    title: string,\n    body: string,\n    link: string,\n    icon: string\n  ) => void;\n} {\n  const [permission, setPermission] =\n    useState<NotificationPermission>(\"default\");\n\n  const showNotification = useCallback(\n    (title: string, body: string, link: string, icon: string): void => {\n      if (window.Notification != null && permission === \"granted\") {\n        new window.Notification(title, { body, icon });\n      } else {\n        // Show a toast instead\n        toast(\n          <div className=\"notification-toast\" key={link}>\n            <img alt={`${title} notification icon`} src={icon} />\n            <div>\n              <h1>{title}</h1>\n              <p>\n                <a href={link} rel=\"noreferrer\" target=\"_blank\">\n                  {body}\n                </a>\n              </p>\n            </div>\n          </div>\n        );\n      }\n    },\n    [permission]\n  );\n\n  const updateNotificationPermission = useCallback(\n    (permission: NotificationPermission): void => {\n      setPermission(permission);\n    },\n    []\n  );\n\n  useEffect((): void => {\n    if (window.Notification != null) {\n      window.Notification.requestPermission().then(\n        (permission: NotificationPermission): void => {\n          updateNotificationPermission(permission);\n        }\n      );\n    }\n  }, [updateNotificationPermission]);\n\n  return { notificationPermission: permission, showNotification };\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}